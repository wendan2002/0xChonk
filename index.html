<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>0xChonk | Fat Cat Protocol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', cursive;
            background-color: #0f0f0f;
            color: #ff9f43;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }

        /* === 1. ÈñãÂ†¥ÂãïÁï´ÁâπÊïà (Intro) === */
        #loading-screen { transition: opacity 0.5s ease-out; }
        .glitch { position: relative; animation: glitch-skew 1s infinite linear alternate-reverse; }
        @keyframes glitch-skew { 0% { transform: skew(0deg); } 20% { transform: skew(-2deg); } 40% { transform: skew(2deg); } 60% { transform: skew(-1deg); } 80% { transform: skew(1deg); } 100% { transform: skew(0deg); } }
        .loading-bar { transition: width 0.2s linear; }

        /* === 2. Ë≤ìÂí™ÂãïÊÖãÁâπÊïà (Animations) === */
        @keyframes breathe { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        .cat-idle { animation: breathe 3s infinite ease-in-out; }
        .cat-tap { animation: tap-bounce 0.1s cubic-bezier(0.1, 0.7, 1.0, 0.1); filter: brightness(1.3); }
        @keyframes tap-bounce { 0% { transform: scale(1); } 50% { transform: scale(0.92); } 100% { transform: scale(1); } }

        /* === 3. ÁàÜÊìäÈúáÂãïÁâπÊïà (Critical Hit) === */
        .crit-shake { animation: shake 0.2s; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }

        /* === 4. ÈÄ†ÂûãÊøæÈè°Á≥ªÁµ± (Skin Filters) === */
        .skin-default { filter: none; }
        .skin-gold { filter: sepia(100%) saturate(300%) brightness(110%) hue-rotate(5deg) drop-shadow(0 0 10px gold); }
        .skin-cyber { filter: hue-rotate(180deg) contrast(150%) brightness(120%) drop-shadow(0 0 5px cyan); }

        /* === 5. ÊµÆÂãïÊï∏Â≠ó === */
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-80px) scale(1.5); } }
        .float-num { position: absolute; color: white; font-size: 28px; pointer-events: none; animation: floatUp 0.6s ease-out forwards; z-index: 50; text-shadow: 3px 3px 0 #000; -webkit-text-stroke: 1px black; }
        .float-crit { color: #ffeb3b !important; font-size: 36px !important; text-shadow: 4px 4px 0 #ff0000 !important; z-index: 60; }

        /* ÈÄöÁî® UI */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .page { display: none; width: 100%; height: 100%; flex-direction: column; }
        .page.active { display: flex; animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .modal-bg { background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); }
        .wheel-container { transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99); }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    </style>
</head>
<body class="h-screen flex flex-col bg-gray-900">

    <!-- === [ÈñãÂ†¥ÂãïÁï´] === -->
    <div id="loading-screen" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center p-8">
        <div class="text-4xl mb-6 glitch text-orange-500">0xCHONK</div>
        <div class="w-full max-w-xs h-4 bg-gray-800 border-2 border-gray-600 mb-2 relative overflow-hidden">
            <div id="loading-fill" class="h-full bg-green-500 w-0 loading-bar"></div>
        </div>
        <div id="loading-text" class="text-[10px] text-green-400 font-mono">INITIALIZING...</div>
    </div>

    <!-- È†ÇÈÉ®Ë≥áË®äÊ¨Ñ -->
    <div class="h-16 px-4 flex justify-between items-center z-20 bg-gray-800 border-b-4 border-white shrink-0">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-orange-500 border-2 border-white flex items-center justify-center text-black text-xs font-bold shadow-[2px_2px_0_0_#000]">0x</div>
            <div class="flex flex-col">
                <span class="text-[8px] text-gray-400">LVL <span id="user-level">1</span></span>
                <span class="text-xs text-white">PLAYER_1</span>
            </div>
        </div>
        <div class="flex gap-2">
            <!-- [ËΩâÁõ§ÊåâÈàï] -->
            <button onclick="toggleSpinModal()" class="bg-purple-600 p-1.5 border border-purple-400 hover:bg-purple-500 active:translate-y-1 rounded relative">
                <i data-lucide="dices" class="w-4 h-4 text-white"></i>
                <div id="spin-badge" class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-ping hidden"></div>
            </button>
            <button onclick="saveData(true)" class="bg-gray-700 p-1.5 border border-gray-500 hover:bg-gray-600 active:translate-y-1 rounded"><i data-lucide="save" class="w-4 h-4 text-white"></i></button>
            <button id="wallet-btn" onclick="toggleWalletModal()" class="flex items-center gap-2 bg-black border-2 border-gray-600 px-3 py-1.5 active:translate-y-1 transition-all">
                <i data-lucide="wallet" class="w-4 h-4 text-gray-400"></i>
                <span id="wallet-text" class="text-[10px] text-gray-400 truncate max-w-[80px]">Connect</span>
            </button>
        </div>
    </div>

    <!-- === È†ÅÈù¢ 1: ÊåñÁ§¶ (MINE) === -->
    <div id="view-mine" class="page active items-center justify-center relative">
        <div class="mb-2 text-center z-10">
            <div class="text-[8px] text-gray-500 mb-2 tracking-widest uppercase">Total Balance</div>
            <div class="text-3xl text-white drop-shadow-md flex items-center justify-center gap-2">
                <img src="https://cdn-icons-png.flaticon.com/512/12196/12196486.png" class="w-6 h-6 animate-pulse filter invert" />
                <span id="score-display">0</span>
            </div>
            <div class="text-[10px] text-green-400 mt-1 flex items-center justify-center gap-1">
                <i data-lucide="zap" class="w-3 h-3"></i> <span id="ppc-display">100</span> / tap
            </div>
        </div>

        <div class="relative cursor-pointer select-none group" id="cat-btn">
            <div class="absolute inset-0 bg-orange-500/20 rounded-full blur-2xl group-active:bg-orange-500/50 transition-all duration-75"></div>
            <div class="w-64 h-64 rounded-full border-4 border-white overflow-hidden relative shadow-[0_0_0_4px_#000,0_10px_20px_rgba(0,0,0,0.5)] cat-idle bg-blue-800 flex items-center justify-center">
                <!-- Âö¥Ê†ºÈÅµÂÆàÂúñÁâá (ÊîØÊè¥ÈÄ†ÂûãÊøæÈè°) -->
                <img id="cat-img" src="https://github.com/wendan2002/0xChonk/blob/main/0xchonk.jpg.jpg?raw=true" class="w-full h-full object-cover scale-110 mt-4 transition-all duration-300 skin-default" alt="Fat Cat" onerror="this.style.display='none'; this.parentElement.innerHTML='<span style=\'font-size:100px\'>üòº</span>'">
            </div>
        </div>

        <div class="mt-6 w-64 mx-auto z-10">
            <div class="flex justify-between text-[10px] text-white mb-1 px-1">
                <span class="flex items-center gap-1">‚ö° ENERGY</span>
                <span id="energy-text">1000/1000</span>
            </div>
            <div class="w-full h-4 bg-gray-700 border-2 border-white relative shadow-[2px_2px_0_0_#000]">
                <div id="energy-bar" class="h-full bg-gradient-to-r from-yellow-500 to-orange-500 w-full transition-all duration-200"></div>
            </div>
        </div>
        
        <button onclick="toggleShopModal()" class="mt-4 bg-orange-600 text-white text-xs px-6 py-3 border-2 border-white shadow-[4px_4px_0_0_#000] active:translate-y-1 active:shadow-none transition-all flex items-center gap-2">
            <i data-lucide="shopping-cart" class="w-4 h-4"></i> SHOP & SKINS
        </button>
    </div>

    <!-- === È†ÅÈù¢ 2: ÊéíË°åÊ¶ú === -->
    <div id="view-leaderboard" class="page p-6 overflow-y-auto no-scrollbar">
        <div class="text-center mb-6">
            <h2 class="text-xl text-white mb-1">HALL OF FAME</h2>
            <p class="text-[10px] text-gray-500">Top Fat Cats</p>
        </div>
        <div class="bg-gray-800 border-2 border-white p-4 mb-4 flex items-center justify-between shadow-[4px_4px_0_0_#000]">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-black font-bold border-2 border-white">YOU</div>
                <div><div class="text-xs text-white">PLAYER_1</div><div class="text-[10px] text-yellow-400" id="lb-your-score">0 CHONK</div></div>
            </div>
            <div class="text-xl font-bold text-gray-500">#999+</div>
        </div>
        <div class="space-y-2" id="leaderboard-list"></div>
    </div>

    <!-- === È†ÅÈù¢ 3: ‰ªªÂãô === -->
    <div id="view-earn" class="page p-6 overflow-y-auto no-scrollbar">
        <h2 class="text-xl text-white text-center mb-6">SOCIAL TASKS</h2>
        <div class="space-y-4 w-full max-w-md mx-auto">
            <div class="bg-gray-800 border-2 border-white p-3 shadow-[4px_4px_0_0_#000] relative group">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-black border-2 border-white flex items-center justify-center shrink-0"><i data-lucide="twitter" class="text-blue-400 w-5 h-5"></i></div>
                    <div class="flex-1"><div class="text-[10px] text-white mb-1">Follow on X</div><div class="text-[10px] text-yellow-400">+5,000 CHONK</div></div>
                    <button id="btn-twitter" onclick="handleTask('twitter', 'https://x.com/wendan2002', 5000)" class="bg-yellow-400 text-black text-[10px] px-3 py-2 border-b-4 border-yellow-600 active:border-0 active:translate-y-1 font-bold">GO</button>
                </div>
            </div>
            <div class="bg-gray-800 border-2 border-white p-3 shadow-[4px_4px_0_0_#000] relative group">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-black border-2 border-white flex items-center justify-center shrink-0"><i data-lucide="send" class="text-blue-300 w-5 h-5"></i></div>
                    <div class="flex-1"><div class="text-[10px] text-white mb-1">Join Community</div><div class="text-[10px] text-yellow-400">+5,000 CHONK</div></div>
                    <button id="btn-telegram" onclick="handleTask('telegram', 'https://t.me/zeroxchonk', 5000)" class="bg-yellow-400 text-black text-[10px] px-3 py-2 border-b-4 border-yellow-600 active:border-0 active:translate-y-1 font-bold">GO</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®Â∞éËà™ -->
    <div class="h-20 bg-gray-800 border-t-4 border-white flex justify-around items-center px-2 shrink-0 z-20">
        <button onclick="switchTab('mine')" class="nav-btn flex flex-col items-center gap-1 p-2 text-yellow-400 transition-colors" id="nav-mine"><i data-lucide="pickaxe" class="w-6 h-6"></i><span class="text-[8px]">MINE</span></button>
        <button onclick="switchTab('leaderboard')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-500 hover:text-white transition-colors" id="nav-leaderboard"><i data-lucide="trophy" class="w-6 h-6"></i><span class="text-[8px]">RANK</span></button>
        <button onclick="switchTab('earn')" class="nav-btn flex flex-col items-center gap-1 p-2 text-gray-500 hover:text-white transition-colors" id="nav-earn"><i data-lucide="coins" class="w-6 h-6"></i><span class="text-[8px]">EARN</span></button>
    </div>

    <!-- === [ÂïÜÂ∫óÂΩàÁ™óÔºöÂåÖÂê´ÈÅìÂÖ∑ËàáÈÄ†Âûã] === -->
    <div id="shop-modal" class="fixed inset-0 modal-bg z-50 hidden flex-col items-center justify-end sm:justify-center p-4">
        <div class="bg-gray-800 border-4 border-white p-4 w-full max-w-sm shadow-[8px_8px_0_0_#000] relative slide-up max-h-[80vh] overflow-y-auto">
            <button onclick="toggleShopModal()" class="absolute top-2 right-2 text-gray-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            <h3 class="text-white text-center mb-4 text-sm font-bold">MARKETPLACE</h3>
            
            <!-- ÂàÜÈ†ÅÊåâÈàï -->
            <div class="flex gap-2 mb-4 border-b border-gray-600 pb-2">
                <button onclick="switchShopTab('upgrades')" id="shop-tab-upgrades" class="flex-1 bg-yellow-400 text-black text-[10px] py-2 font-bold">UPGRADES</button>
                <button onclick="switchShopTab('skins')" id="shop-tab-skins" class="flex-1 bg-gray-700 text-gray-300 text-[10px] py-2 font-bold hover:bg-gray-600">SKINS</button>
            </div>

            <!-- 1. ÈÅìÂÖ∑ÂàÜÈ†Å -->
            <div id="shop-upgrades" class="space-y-3">
                <div class="bg-gray-900 p-2 border border-gray-600 flex justify-between items-center">
                    <div class="flex items-center gap-3"><div class="w-8 h-8 bg-blue-900 border border-blue-500 flex items-center justify-center"><i data-lucide="zap" class="text-yellow-400 w-4 h-4"></i></div><div><div class="text-[10px] text-white font-bold">Power Glove</div><div class="text-[8px] text-gray-400">+100 Tap</div></div></div>
                    <button onclick="buyUpgrade('tap')" class="bg-yellow-400 text-black text-[10px] px-2 py-1 font-bold min-w-[60px] border-b-2 border-yellow-600 active:border-0 active:translate-y-1">Buy <span id="price-tap">500</span></button>
                </div>
                <div class="bg-gray-900 p-2 border border-gray-600 flex justify-between items-center">
                    <div class="flex items-center gap-3"><div class="w-8 h-8 bg-green-900 border border-green-500 flex items-center justify-center"><i data-lucide="battery-charging" class="text-green-400 w-4 h-4"></i></div><div><div class="text-[10px] text-white font-bold">Energy Drink</div><div class="text-[8px] text-gray-400">+500 Max</div></div></div>
                    <button onclick="buyUpgrade('energy')" class="bg-yellow-400 text-black text-[10px] px-2 py-1 font-bold min-w-[60px] border-b-2 border-yellow-600 active:border-0 active:translate-y-1">Buy <span id="price-energy">1000</span></button>
                </div>
            </div>

            <!-- 2. ÈÄ†ÂûãÂàÜÈ†Å -->
            <div id="shop-skins" class="space-y-3 hidden">
                <div class="bg-gray-900 p-2 border border-gray-600 flex justify-between items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-orange-500 rounded-full overflow-hidden border border-white"><img src="https://github.com/wendan2002/0xChonk/blob/main/0xchonk.jpg.jpg?raw=true" class="w-full h-full object-cover"></div><div class="text-[10px] text-white font-bold">Original</div></div><button onclick="equipSkin('default')" class="bg-gray-600 text-white text-[10px] px-2 py-1 font-bold rounded">EQUIP</button></div>
                <div class="bg-gray-900 p-2 border border-yellow-500 flex justify-between items-center relative overflow-hidden"><div class="absolute inset-0 bg-yellow-500/10"></div><div class="flex items-center gap-3 relative z-10"><div class="w-8 h-8 bg-yellow-400 rounded-full overflow-hidden border border-white"><img src="https://github.com/wendan2002/0xChonk/blob/main/0xchonk.jpg.jpg?raw=true" class="w-full h-full object-cover skin-gold"></div><div><div class="text-[10px] text-yellow-400 font-bold">GOLDEN CAT</div><div class="text-[8px] text-gray-400">Sepia Filter</div></div></div><button id="btn-buy-gold" onclick="buySkin('gold', 10000)" class="bg-yellow-400 text-black text-[10px] px-2 py-1 font-bold border-b-2 border-yellow-600 active:border-0 active:translate-y-1">10k</button></div>
                <div class="bg-gray-900 p-2 border border-cyan-500 flex justify-between items-center relative overflow-hidden"><div class="absolute inset-0 bg-cyan-500/10"></div><div class="flex items-center gap-3 relative z-10"><div class="w-8 h-8 bg-black rounded-full overflow-hidden border border-cyan-400"><img src="https://github.com/wendan2002/0xChonk/blob/main/0xchonk.jpg.jpg?raw=true" class="w-full h-full object-cover skin-cyber"></div><div><div class="text-[10px] text-cyan-400 font-bold">CYBER CAT</div><div class="text-[8px] text-gray-400">Glitch Effect</div></div></div><button id="btn-buy-cyber" onclick="buySkin('cyber', 50000)" class="bg-cyan-500 text-black text-[10px] px-2 py-1 font-bold border-b-2 border-cyan-700 active:border-0 active:translate-y-1">50k</button></div>
            </div>
        </div>
    </div>

    <!-- === [Âπ∏ÈÅãËΩâÁõ§ÂΩàÁ™ó] === -->
    <div id="spin-modal" class="fixed inset-0 modal-bg z-50 hidden flex-col items-center justify-center p-4">
        <div class="bg-gray-800 border-4 border-white p-6 w-full max-w-xs shadow-[8px_8px_0_0_#000] relative text-center">
            <button onclick="toggleSpinModal()" class="absolute top-2 right-2 text-gray-400 hover:text-white"><i data-lucide="x" class="w-5 h-5"></i></button>
            <h3 class="text-white text-lg mb-4 font-bold">DAILY SPIN</h3>
            
            <div class="relative w-48 h-48 mx-auto mb-6">
                <!-- ÊåáÈáù -->
                <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-2 w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[20px] border-t-white z-20 drop-shadow-md"></div>
                <!-- ËΩâÁõ§ -->
                <div id="wheel" class="w-full h-full rounded-full border-4 border-white overflow-hidden shadow-lg" 
                     style="background: conic-gradient(#facc15 0% 10%, #fb923c 10% 25%, #f87171 25% 45%, #60a5fa 45% 75%, #4ade80 75% 100%);">
                     <div class="absolute inset-0 rounded-full border-4 border-black/20"></div>
                </div>
            </div>

            <div id="spin-result" class="text-sm text-white h-6 mb-4 font-bold">Try your luck!</div>
            <button id="btn-spin" onclick="spinWheel()" class="w-full bg-purple-600 text-white py-3 border-b-4 border-purple-800 active:border-0 active:translate-y-1 font-bold text-xs shadow-lg">SPIN NOW (Free)</button>
            <p class="text-[8px] text-gray-500 mt-2">Refreshes every 24h</p>
        </div>
    </div>

    <!-- Èå¢ÂåÖÂΩàÁ™ó -->
    <div id="wallet-modal" class="fixed inset-0 modal-bg z-50 hidden flex-col items-center justify-center p-4">
        <div class="bg-gray-800 border-4 border-white p-6 w-full max-w-xs shadow-[8px_8px_0_0_#000] relative">
            <button onclick="toggleWalletModal()" class="absolute top-2 right-2 text-gray-400 hover:text-white"><i data-lucide="x" class="w-5 h-5"></i></button>
            <h3 class="text-white text-center mb-6 text-sm">CONNECT WALLET</h3>
            <div class="space-y-3">
                <button onclick="simulateConnect('Phantom')" class="w-full bg-purple-900 border-2 border-white p-3 flex items-center gap-3 hover:bg-purple-800 transition-colors"><div class="w-8 h-8 bg-purple-500 rounded-full"></div><span class="text-xs text-white">Phantom</span></button>
                <button onclick="simulateConnect('Metamask')" class="w-full bg-orange-900 border-2 border-white p-3 flex items-center gap-3 hover:bg-orange-800 transition-colors"><div class="w-8 h-8 bg-orange-500 rounded-full"></div><span class="text-xs text-white">Metamask</span></button>
            </div>
        </div>
    </div>

    <!-- ÊØèÊó•Á∞ΩÂà∞ÂΩàÁ™ó -->
    <div id="daily-modal" class="fixed inset-0 modal-bg z-50 hidden flex-col items-center justify-center p-4">
        <div class="bg-gray-800 border-4 border-white p-6 w-full max-w-sm shadow-[8px_8px_0_0_#000] relative pop-in text-center">
            <div class="text-4xl mb-4 animate-bounce">üéÅ</div>
            <h3 class="text-white text-lg mb-2 font-bold">DAILY REWARD</h3>
            <p class="text-xs text-gray-400 mb-6">Come back every day to earn more!</p>
            <div class="bg-gray-900 border-2 border-gray-600 p-4 mb-6 rounded-lg"><div class="text-xs text-gray-400 mb-1">REWARD</div><div class="text-2xl text-yellow-400 font-bold">+5,000 CHONK</div></div>
            <button onclick="claimDaily()" class="w-full bg-green-500 text-white py-3 border-b-4 border-green-700 active:border-0 active:translate-y-1 font-bold text-xs shadow-lg">CLAIM REWARD</button>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Ê†∏ÂøÉÊï∏Êìö
        let score = parseInt(localStorage.getItem('chonk_score')) || 0;
        let tapLevel = parseInt(localStorage.getItem('chonk_tap_lvl')) || 1;
        let energyLevel = parseInt(localStorage.getItem('chonk_energy_lvl')) || 1;
        let walletAddress = localStorage.getItem('chonk_wallet');
        let lastLogin = localStorage.getItem('chonk_last_login');
        let ownedSkins = JSON.parse(localStorage.getItem('chonk_skins')) || ['default'];
        let currentSkin = localStorage.getItem('chonk_current_skin') || 'default';
        let lastSpin = localStorage.getItem('chonk_last_spin');

        let pointsPerTap = 100 * tapLevel;
        let maxEnergy = 1000 + (energyLevel - 1) * 500;
        let energy = maxEnergy; 
        let tapPrice = 500 * Math.pow(2, tapLevel - 1);
        let energyPrice = 1000 * Math.pow(2, energyLevel - 1);

        const scoreDisplay = document.getElementById('score-display');
        const ppcDisplay = document.getElementById('ppc-display');
        const energyBar = document.getElementById('energy-bar');
        const energyText = document.getElementById('energy-text');
        const catBtn = document.getElementById('cat-btn');
        const catImg = document.getElementById('cat-img');

        // ÈñãÂ†¥ÂãïÁï´ & ÂàùÂßãÂåñ
        window.addEventListener('load', () => {
            const loadingBar = document.getElementById('loading-fill');
            const loadingText = document.getElementById('loading-text');
            const screen = document.getElementById('loading-screen');
            setTimeout(() => { loadingBar.style.width = '30%'; }, 200);
            setTimeout(() => { loadingBar.style.width = '70%'; loadingText.innerText = "CONNECTING SOLANA..."; }, 800);
            setTimeout(() => { loadingBar.style.width = '100%'; loadingText.innerText = "WAKING UP CAT..."; }, 1500);
            setTimeout(() => { 
                screen.style.opacity = '0'; 
                setTimeout(() => screen.remove(), 500); 
                checkDailyReward(); // ÈñãÂ†¥ÂæåÊ™¢Êü•Á∞ΩÂà∞
                checkSpinAvailable(); // Ê™¢Êü•ËΩâÁõ§
            }, 2200);
        });

        if(walletAddress) updateWalletUI(walletAddress);
        updateUI();
        initLeaderboard();
        applySkin(currentSkin);
        updateSkinButtons();

        // --- 1. ÈªûÊìä & ÁàÜÊìä (Crit) ---
        catBtn.addEventListener('mousedown', handleTap);
        catBtn.addEventListener('touchstart', (e) => { e.preventDefault(); handleTap(e.touches[0]); });

        function handleTap(e) {
            if (energy < 10) return;
            energy -= 10;
            // 8% ÁàÜÊìäÊ©üÁéá
            let isCrit = Math.random() < 0.08;
            let finalPoints = isCrit ? pointsPerTap * 5 : pointsPerTap;
            score += finalPoints;
            saveData();
            updateUI();
            
            // Ë≤ìÂí™Âãï‰Ωú
            const container = catBtn.querySelector('div');
            container.classList.remove('cat-idle'); container.style.animation = 'none'; container.offsetHeight; container.style.animation = null; container.classList.add('cat-tap');
            
            // ÁàÜÊìäÈúáÂãï
            if(isCrit) { document.body.classList.add('crit-shake'); setTimeout(() => document.body.classList.remove('crit-shake'), 200); }
            setTimeout(() => { container.classList.remove('cat-tap'); container.classList.add('cat-idle'); }, 100);
            
            const rect = catBtn.getBoundingClientRect();
            const x = e.clientX || (rect.left + rect.width/2);
            const y = e.clientY || (rect.top + rect.height/2);
            showFloatingText(x, y, `+${finalPoints}`, isCrit);
            if (navigator.vibrate) navigator.vibrate(isCrit ? 50 : 15);
        }

        // --- 2. ËΩâÁõ§Á≥ªÁµ± (Spin) ---
        function toggleSpinModal() { document.getElementById('spin-modal').classList.toggle('hidden'); document.getElementById('spin-modal').classList.toggle('flex'); checkSpinAvailable(); }
        function checkSpinAvailable() {
            const now = new Date().toDateString();
            const badge = document.getElementById('spin-badge');
            const btn = document.getElementById('btn-spin');
            if (lastSpin !== now) { badge.classList.remove('hidden'); btn.disabled = false; btn.innerText = "SPIN NOW (Free)"; btn.classList.replace('bg-gray-600', 'bg-purple-600'); } 
            else { badge.classList.add('hidden'); btn.disabled = true; btn.innerText = "COME BACK TOMORROW"; btn.classList.replace('bg-purple-600', 'bg-gray-600'); btn.classList.replace('border-purple-800', 'border-gray-800'); }
        }
        function spinWheel() {
            const wheel = document.getElementById('wheel');
            const resultText = document.getElementById('spin-result');
            const btn = document.getElementById('btn-spin');
            btn.disabled = true;
            const baseSpins = 1800; 
            const randomDeg = Math.floor(Math.random() * 360);
            const totalDeg = baseSpins + randomDeg;
            wheel.style.transform = `rotate(${totalDeg}deg)`;
            wheel.classList.add('wheel-container');
            setTimeout(() => {
                let reward = 0; let text = ""; const rand = Math.random();
                if(rand < 0.05) { reward = 10000; text = "JACKPOT! 10,000 CHONK"; } else if(rand < 0.2) { reward = 5000; text = "BIG WIN! 5,000 CHONK"; } else if(rand < 0.5) { reward = 2000; text = "Nice! 2,000 CHONK"; } else { reward = 500; text = "Small win. 500 CHONK"; }
                resultText.innerText = text; score += reward;
                const now = new Date().toDateString(); localStorage.setItem('chonk_last_spin', now); lastSpin = now;
                saveData(); updateUI(); checkSpinAvailable(); alert(`You won: ${reward} CHONK!`);
                setTimeout(() => { wheel.style.transition = 'none'; wheel.style.transform = 'rotate(0deg)'; }, 1000);
            }, 4000);
        }

        // --- 3. ÂïÜÂ∫óËàáÈÄ†Âûã (Shop & Skins) ---
        function toggleShopModal() { const m = document.getElementById('shop-modal'); m.classList.toggle('hidden'); m.classList.toggle('flex'); document.getElementById('price-tap').innerText = tapPrice; document.getElementById('price-energy').innerText = energyPrice; updateSkinButtons(); }
        function switchShopTab(t) { document.getElementById('shop-upgrades').classList.add('hidden'); document.getElementById('shop-skins').classList.add('hidden'); document.getElementById('shop-tab-upgrades').classList.replace('bg-yellow-400', 'bg-gray-700'); document.getElementById('shop-tab-upgrades').classList.replace('text-black', 'text-gray-300'); document.getElementById('shop-tab-skins').classList.replace('bg-yellow-400', 'bg-gray-700'); document.getElementById('shop-tab-skins').classList.replace('text-black', 'text-gray-300'); document.getElementById(`shop-${t}`).classList.remove('hidden'); document.getElementById(`shop-tab-${t}`).classList.replace('bg-gray-700', 'bg-yellow-400'); document.getElementById(`shop-tab-${t}`).classList.replace('text-gray-300', 'text-black'); }
        function buyUpgrade(t) { if (t==='tap'){ if(score>=tapPrice){score-=tapPrice;tapLevel++;tapPrice=500*Math.pow(2,tapLevel-1);pointsPerTap=100*tapLevel;alert("Upgraded!");}else{alert("No CHONK!");} } else { if(score>=energyPrice){score-=energyPrice;energyLevel++;energyPrice=1000*Math.pow(2,energyLevel-1);maxEnergy=1000+(energyLevel-1)*500;energy=maxEnergy;alert("Upgraded!");}else{alert("No CHONK!");} } saveData();updateUI();toggleShopModal();toggleShopModal(); }
        function buySkin(id, p) { if(ownedSkins.includes(id))return; if(score>=p){score-=p;ownedSkins.push(id);alert("Unlocked!");equipSkin(id);saveData();updateUI();updateSkinButtons();}else{alert("No CHONK!");} }
        function equipSkin(id) { if(!ownedSkins.includes(id))return; currentSkin=id; saveData(); applySkin(id); updateSkinButtons(); }
        function applySkin(id) { catImg.className="w-full h-full object-cover scale-110 mt-4 transition-all duration-300"; catImg.classList.add(`skin-${id}`); }
        function updateSkinButtons() { ['gold','cyber'].forEach(id=>{ const b=document.getElementById(`btn-buy-${id}`); if(ownedSkins.includes(id)){ b.innerText=(currentSkin===id)?"EQUIPPED":"EQUIP"; b.onclick=()=>equipSkin(id); b.className=(currentSkin===id)?"bg-green-500 text-white text-[10px] px-2 py-1 font-bold rounded cursor-default":"bg-gray-600 text-white text-[10px] px-2 py-1 font-bold rounded";} }); }

        // --- ÂÖ±ÈÄö ---
        function checkDailyReward() { const now = new Date().toDateString(); if (lastLogin !== now) { setTimeout(() => { document.getElementById('daily-modal').classList.remove('hidden'); document.getElementById('daily-modal').classList.add('flex'); }, 1000); } }
        function claimDaily() { const now = new Date().toDateString(); localStorage.setItem('chonk_last_login', now); score += 5000; saveData(); updateUI(); document.getElementById('daily-modal').classList.add('hidden'); document.getElementById('daily-modal').classList.remove('flex'); alert("Daily Reward Claimed! +5,000 CHONK"); }
        function initLeaderboard() { const l=document.getElementById('leaderboard-list'); const u=[{n:"Elon_Musk",s:"999M"},{n:"Vitalik",s:"500M"},{n:"Doge_King",s:"100M"}]; u.forEach((x,i)=>{ l.innerHTML+=`<div class="flex justify-between p-3 border-b border-gray-700"><div class="flex gap-3"><div class="${i===0?'text-yellow-400':'text-gray-400'} font-bold">#${i+1}</div><div class="text-xs text-white">${x.n}</div></div><div class="text-xs text-gray-400">${x.s}</div></div>`; }); }
        function handleTask(id,u,r) { const b=document.getElementById(`btn-${id}`); if(b.disabled)return; window.open(u,'_blank'); b.innerText="VERIFYING..."; b.classList.add('opacity-50'); setTimeout(()=>{ score+=r; saveData(); updateUI(); b.innerText="CLAIMED"; b.disabled=true; b.classList.replace('bg-yellow-400','bg-green-500'); b.classList.replace('border-yellow-600','border-green-700'); b.classList.replace('text-black','text-white'); b.classList.remove('opacity-50'); },3000); }
        function toggleWalletModal() { const m=document.getElementById('wallet-modal'); m.classList.toggle('hidden'); m.classList.toggle('flex'); }
        function simulateConnect(p) { const b=document.querySelector(`button[onclick="simulateConnect('${p}')"]`); b.innerHTML=`<span class="animate-pulse">Connecting...</span>`; setTimeout(()=>{ const a="0x"+Math.random().toString(16).substr(2,4).toUpperCase()+"...CHONK"; localStorage.setItem('chonk_wallet',a); updateWalletUI(a); toggleWalletModal(); alert("Connected!"); },1500); }
        function updateWalletUI(a) { const b=document.getElementById('wallet-btn'); const t=document.getElementById('wallet-text'); b.classList.replace('bg-black','bg-green-900'); b.classList.replace('border-gray-600','border-green-500'); t.innerText=a; t.classList.replace('text-gray-400','text-green-300'); }
        function switchTab(t) { document.querySelectorAll('.page').forEach(e=>e.classList.remove('active')); document.getElementById(`view-${t}`).classList.add('active'); document.querySelectorAll('.nav-btn').forEach(e=>{e.classList.remove('text-yellow-400');e.classList.add('text-gray-500')}); document.getElementById(`nav-${t}`).classList.remove('text-gray-500'); document.getElementById(`nav-${t}`).classList.add('text-yellow-400'); }
        function showFloatingText(x,y,t,c) { const e=document.createElement('div'); e.className=c?'float-num float-crit':'float-num'; e.innerText=c?t+" CRIT!":t; e.style.left=(x+(Math.random()-0.5)*40)+'px'; e.style.top=(y-50)+'px'; document.body.appendChild(e); setTimeout(()=>e.remove(),600); }
        function updateUI() { scoreDisplay.innerText=score.toLocaleString(); document.getElementById('lb-your-score').innerText=score.toLocaleString(); ppcDisplay.innerText=pointsPerTap; energyText.innerText=Math.floor(energy)+"/"+maxEnergy; energyBar.style.width=(energy/maxEnergy)*100+"%"; document.getElementById('user-level').innerText=tapLevel; }
        function saveData(a) { localStorage.setItem('chonk_score',score); localStorage.setItem('chonk_tap_lvl',tapLevel); localStorage.setItem('chonk_energy_lvl',energyLevel); localStorage.setItem('chonk_skins',JSON.stringify(ownedSkins)); localStorage.setItem('chonk_current_skin',currentSkin); if(a)alert("Saved!"); }
        setInterval(()=>{ if(energy<maxEnergy){ energy+=5; if(energy>maxEnergy)energy=maxEnergy; updateUI(); } },1000);
    </script>
</body>
</html>

